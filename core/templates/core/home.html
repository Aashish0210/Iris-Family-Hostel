{% extends 'base.html' %}

{% block title %}Home | IRIS FAMILY HOSTEL{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/home.css" />
<link rel="stylesheet" href="/static/css/home_feature.css" />
<link rel="stylesheet" href="/static/css/testominal.css" />

<style>
/* ====== Global Styles ====== */
/* body {
  font-family: 'Poppins', sans-serif;
  background-color: #f8fafc;
  color: #222;
  scroll-behavior: smooth;
  margin: 0;
  padding: 0;
} */

section {
  padding: 10px 3%;
  position: relative;
}

/* Uniform heading style across sections */
section h2 {
  font-size: 2.2rem;
  font-weight: 600;
  text-align: center;
  background: linear-gradient(90deg, #0ea5e9, #1e3a8a);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 15px;
  letter-spacing: 1px;
}

/* ====== Hero Section ====== */
.hero {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 50%, #7dd3fc 100%);
  border-radius: 1.8rem;
  padding: 60px 5%;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  position: relative;
}

.hero::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(5px);
  z-index: 0;
}

.hero-text {
  max-width: 50%;
  z-index: 1;
  animation: fadeInLeft 1s ease;
}

.hero-text h1 {
  font-size: 2.6rem;
  font-weight: 700;
  color: #0c4a6e;
  line-height: 1.2;
  margin-bottom: 0.8rem;
}

.hero-text p {
  font-size: 1.05rem;
  color: #334155;
  margin-bottom: 1.8rem;
  line-height: 1.6;
}

.hero .btn {
  background: linear-gradient(135deg, #0284c7, #0ea5e9);
  color: #fff;
  padding: 10px 24px;
  border-radius: 40px;
  font-weight: 600;
  font-size: 1rem;
  transition: all 0.3s;
}

.hero .btn:hover {
  background: linear-gradient(135deg, #0369a1, #0284c7);
  transform: translateY(-3px);
}

.hero-img {
  width: 42%;
  border-radius: 1.5rem;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  animation: fadeInRight 1s ease;
}

/* ====== About Section ====== */
.about {
  background: linear-gradient(180deg, #f0f9ff 0%, #e0f2fe 100%);
  border-radius: 1.8rem;
  text-align: center;
  overflow: hidden;
  padding: 70px 8%;
  margin: 20px;
}

.about h2 {
  margin-bottom: 30px;
}

.scroll-gallery-wrapper {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 18px;
  max-width: 1000px;
  margin: 0 auto 30px;
}

.scroll-item {
  border-radius: 1rem;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}
.scroll-item:hover {
  transform: scale(1.03);
}

.scroll-item img {
  width: 100%;
  height: 220px;
  object-fit: cover;
}

.about p {
  font-size: 1rem;
  color: #353637;
  line-height: 1.7;
  max-width: 100%;
  margin: 25px auto 0;
}

/* ====== Features Section ====== */
.features {
  background: linear-gradient(180deg, #ecfeff 0%, #e0f2fe 100%);
  border-radius: 1.8rem;
}

.cards {
  display: flex;
  flex-direction: column;
  gap: 45px;
}

.card {
  display: flex;
  align-items: center;
  gap: 30px;
  background: #fff;
  border-radius: 1.3rem;
  padding: 25px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  transition: all 0.5s ease;
}

.card:hover {
  transform: translateY(-6px);
}

.card-img-container img {
  width: 200px;
  height: 150px;
  border-radius: 1rem;
  object-fit: cover;
}

.card-text h3 {
  font-size: 1.4rem;
  color: #0369a1;
  margin-bottom: 8px;
}

.card-text p {
  color: #475569;
  font-size: 0.98rem;
  line-height: 1.6;
}

/* ====== Testimonial Section ====== */
.testimonial-section {
  background: #f1f5f9;
  border-radius: 1.8rem;
  text-align: center;
}

.testimonial-section h2 {
  margin-bottom: 25px;
}

.testimonial-cards {
  display: flex;
  gap: 18px;
  animation: slideTestimonials 25s linear infinite;
}

.testimonial-card {
  background: #fff;
  border-radius: 1rem;
  padding: 25px;
  min-width: 280px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
  transition: transform 0.4s ease;
}

.testimonial-card:hover {
  transform: scale(1.05);
}

/* ====== Contact Section ====== */
.contact {
  background: linear-gradient(135deg, #bae6fd, #e0f2fe);
  border-radius: 1.8rem;
  text-align: center;
  margin: 20px;;
}

.contact h2 {
  margin-bottom: 10px;
}

.contact p {
  font-size: 1rem;
  margin-bottom: 25px;
  color: #444;
}

.book-tour-btn {
  background: #0284c7;
  color: white;
  padding: 10px 26px;
  border: none;
  border-radius: 50px;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.3s;
}

.book-tour-btn:hover {
  background: #0ea5e9;
  transform: scale(1.05);
}

/* ====== Animations ====== */
@keyframes fadeInLeft { from { opacity: 0; transform: translateX(-40px); } to { opacity: 1; transform: translateX(0); } }
@keyframes fadeInRight { from { opacity: 0; transform: translateX(40px); } to { opacity: 1; transform: translateX(0); } }
@keyframes slideTestimonials { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

/* ====== Responsive ====== */
@media (max-width: 768px) {
  section { padding: 60px 5%; }
  .hero { flex-direction: column; text-align: center; }
  .hero-text { max-width: 100%; }
  .hero-text h1 { font-size: 2rem; }
  .hero-img { width: 90%; margin-top: 25px; }
  .card { flex-direction: column; text-align: center; }
  .card-img-container img { width: 80%; height: 180px; }
  .scroll-item img { height: 180px; }
}
</style>

{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
  <div class="hero-text">
    <h1>{{ hero.title }}</h1>
    <p>{{ hero.description }}</p>
    <div class="hero-actions">
      <a class="btn" href="{{ hero.button_link }}">{{ hero.button_text }}</a>
    </div>
  </div>
  {% if hero.image %}
    <img class="hero-img" src="{{ hero.image.url }}" alt="Hero Image">
  {% else %}
    <img class="hero-img" src="/static/images/hero.jpg" alt="Hero Image">
  {% endif %}
</section>

<!-- About Section -->
<section class="about">
  <h2>{{ tour.head }}</h2>
  {% if tour.images.all %}
  <div class="scroll-gallery-wrapper">
    <div class="scroll-gallery">
      {% for image in tour.images.all %}
        <div class="scroll-item">
          <img src="{{ image.image.url }}" alt="Tour image {{ forloop.counter }}">
        </div>
      {% endfor %}
      {% for image in tour.images.all %}
        <div class="scroll-item">
          <img src="{{ image.image.url }}" alt="Tour image duplicate {{ forloop.counter }}">
        </div>
      {% endfor %}
    </div>
  </div>
  <p>{{ tour.content }}</p>
  {% endif %}
</section>

<!-- Features Section -->
<section class="features">
  <h2>Why Choose Us</h2>
  <div class="cards">
    {% for feature in features %}
      <div class="card {% cycle 'left' 'right' %}">
        {% if feature.image %}
          <div class="card-img-container">
            <img src="{{ feature.image.url }}" alt="{{ feature.title }}" class="card-img">
          </div>
        {% endif %}
        <div class="card-text">
          <h3>{{ feature.title }}</h3>
          <p>{{ feature.description }}</p>
        </div>
      </div>
    {% empty %}
      <p>No features added yet. Please add them from admin.</p>
    {% endfor %}
  </div>
</section>

<script>
const cards = document.querySelectorAll('.card');
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('show');
    }
  });
}, { threshold: 0.2 });
cards.forEach(card => observer.observe(card));
</script>

<!-- Expection  Section -->
<section class="features">
  <h2>What We Expect From You Parents</h2>
  <div class="cards">
    {% for expection in expections %}
      <div class="card {% cycle 'left' 'right' %}">
        {% if feature.image %}
          <div class="card-img-container">
            <img src="{{ expection.image.url }}" alt="{{ expection.title }}" class="card-img">
          </div>
        {% endif %}
        <div class="card-text">
          <h3>{{ expection.title }}</h3>
          <p>{{ expection.description }}</p>
        </div>
      </div>
    {% empty %}
      <p>No features added yet. Please add them from admin.</p>
    {% endfor %}
  </div>
</section>

<script>
const card = document.querySelectorAll('.card');
const observers = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('show');
    }
  });
}, { threshold: 0.2 });
card.forEach(card => observers.observe(card));
</script>

<!-- Testimonial Section -->
<section class="testimonial-section">
  <h2>What Parents Say</h2>
  <div class="testimonial-form-dropdown">
    <button id="toggleTestimonialFormBtn" type="button" class="testimonial-toggle-btn">
      Share Your Experience ▼
    </button>
    <div id="testimonialFormContainer" class="testimonial-form hidden">
      <form method="POST" action="{% url 'home' %}">
        {% csrf_token %}
        {{ testimonial_form.as_p }}
        <button type="submit" name="testimonial-submit" class="btn-submit btn">Submit Testimonial</button>
      </form>
    </div>
  </div>

  <div class="testimonial-slider-wrapper">
    <div class="testimonial-cards">
      {% for testimonial in testimonials %}
        <div class="testimonial-card">
          <p class="testimonial-message">"{{ testimonial.message }}"</p>
          <h4 class="testimonial-name">- {{ testimonial.name }}</h4>
        </div>
      {% empty %}
        <p>No testimonials yet. Be the first to share your experience!</p>
      {% endfor %}
    </div>
  </div>
</section>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const toggleBtn = document.getElementById('toggleTestimonialFormBtn');
  const formContainer = document.getElementById('testimonialFormContainer');
  toggleBtn.addEventListener('click', function() {
    formContainer.classList.toggle('hidden');
    toggleBtn.textContent = formContainer.classList.contains('hidden')
      ? "Share Your Experience ▼"
      : "Close Form ▲";
  });
});
</script>

<!-- Contact Section -->
<section class="contact">
  <h2>Visit Us Today</h2>
  <p>Schedule a tour to see our facilities and meet our caring staff.</p>

  <button id="bookTourBtn" class="book-tour-btn">Book a Tour</button>

  <div id="contactFormContainer" class="contact-form-wrapper">
    <div class="contact-form">
      <form method="POST" action="{% url 'home' %}">
        {% csrf_token %}
        {{ contact_form.as_p }}
        <button type="submit" name="contact-submit" class="btn-submit">Submit Request</button>
      </form>
    </div>

    <div class="contact-map">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d854.9942084997796!2d85.3076244423!3d27.64153461972835!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1755792101478!5m2!1sen!2sus"
        allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </div>
</section>

<script>
const btn = document.getElementById('bookTourBtn');
const contactFormWrapper = document.getElementById('contactFormContainer');
btn.addEventListener('click', () => {
  contactFormWrapper.classList.toggle('active');
  btn.textContent = contactFormWrapper.classList.contains('active') ? "Close Form" : "Book a Tour";
});
</script>
{% endblock %}
